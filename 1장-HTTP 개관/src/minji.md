# HTTP 개관
## HTTP: 인터넷의 멀티미디어 배달부
* HTTP 는 신뢰성 있는 데이터 전송 프로토콜을 사용함
* 데이터가 전송 중 손상되거나 꼬이지 않으므로 개발자가 데이터 손상 걱정 없이 개발에만 집중할 수 있음
<br/><br/>

## 웹 클라이언트와 서버
* 웹 서버는 HTTP 프로토콜로 의사소통 함 -> HTTP 서버라고 불림
* 웹 서버는 인터넷의 데이터를 저장하고 HTTP 클라이언트가 요청한 데이터를 전송함
* ex) 웹서버 클라이언트 - 인터넷 익스플로러, 구글 크롬
<br/><br/>

## 리소스
* 웹 서버는 웹 리소스를 관리하고 제공함
* 웹 리소스 - 정적 파일(텍스트 파일, HTML 파일, 이미지 등), 동적 컨텐츠 리소스(요청에 따라 컨텐츠를 생성)

### 미디어 타입
* HTTP 는 전송되는 객체 각각에 MIME 타입이라는 데이터 포맷 라벨을 붙임
* MIME(Multipurpose Internet Main Extensions, 다목적 인터넷 메일 확장)
* 웹 서버는 MIME 타입을 통해 다룰 수 있는 객체인지 확인함
* MIME 타입은 `주타입/부타입` 으로 이루어진 문자열 라벨 (ex.text/html, image/jpeg)

### URI
* URI(Uniform Resource Identifier, 통합 자원 식별자): 서버 리소스의 이름으로 고유하게 식별하고 위치를 지정할 수 있음
* URL 과 URN 두 종류

### URL
* URL(Uniform Resource Locator, 통합 자원 지시자): 리소스의 구체적인 위치를 서술하고 어떻게 접근할 수 있는지 알려줌
* ex)http://www.devtato.com/index.html
* 세 부분으로 구성 - 스킴(ex.http://), 서버의 인터넷 주소(ex.www.devtato.com), 리소스(/index.html)
* 오늘날 대부분의 URI 는 URL 로 사용

### URN
* URN(Uniform Resource Name, 유니폼 리소스 이름): 위치에 영향 받지 않는 유일무이한 이름 역할을 함
* URN 리소스 위치를 분석하기 위한 인프라 자원이 필요한데, 그런 인프라가 부족하여 널리 채택되지 않았음
<br/><br/>

## 트랜잭션
* HTTP 트랜잭션 = 요청명령(클라이언트->서버) + 응답결과(서버->클라이언트)
* HTTP 메서드 라는 데이터 덩어리를 이용해 이루어짐

### 메서드
* HTTP 요청 메세지는 한 개의 메서드를 가지고, 해당 메서드는 서버에게 어떤 동작을 취해야 하는지 알려줌
* `GET` : 서버에서 클라이언트로 지정한 리소스를 보내라
* `PUT` : 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장해라
* `DELETE` : 지정한 리소스를 서버에서 삭제해라
* `POST` : 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라
* `HEAD` : 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 보내라

### 상태 코드
* 모든 HTTP 응답 메소드는 상태 코드와 함께 반환됨
* 클라이언트에게 요청 성공 여부 또는 추가 조치 필요 여부를 알려주는 세 자리 숫자
* ex)200(OK), 302(다시 보내라. 다른 곳에서 리소스 가져가라), 404(리소스 찾을 수 없음)

### 웹 페이지는 여러 객체로 이루어질 수 있다
* 웹페이지는 하나의 리소스가 아닌 리소스의 모음

### 메시지
* HTTP 메시지는 줄 단위의 문자열. 이진 형식이 아닌 일반 텍스트기 때문에 사람이 읽고 쓰기 쉬움
* HTTP 메시지는 요청 메시지 또는 응답 메시지임
* HTTP 메시지 구성 - 시작줄 + 헤더 + 본문
  * 시작줄: 요청 - 무엇을 해야하는지 / 응답 - 무슨 일이 일어났는지
  * 헤더: 0개 이상의 헤더 필드로 이루어짐. 헤더 필드는 `이름:값` 으로 구성. 헤더는 빈 줄로 끝남
  * 본문: 데이터가 들어있음. 시작줄, 헤더와 달리 임의의 이진 데이터 포함 가능
<br/><br/>

## TCP 커넥션
* TCP(Transmission Control Protocol, 전송 제어 프로토콜)

### TCP/IP
* HTTP 는 애플리케이션 계층 프로토콜로 네트워크 통신의 핵심 사항에 신경쓰지 않고 인터넷 전송 프로토콜인 TCP/IP 에게 맡김
* TCP/IP 제공
  * 오류 없는 데이터 전송
  * 순서에 맞는 전달(보낸순)
  * 조각나지 않는 데이터 스크림(언제든 어떤 크기로든 전송 가능)
* TCP/IP 는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합
* TCP 는 전송 계층, IP 는 네트워크 계층

### 접속, IP 주소 그리고 포트번호
* IP(Internet Protocol, 인터넷 프로토콜) 
* HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에 IP 와 포트번호를 사용하여 TCP/IP 커넥션을 맺어야 함
* TCP에서는 서버 컴퓨터에 대한 IP 주소, 실행중인 프로그램이 사용 중인 포트 번호 필요
* URL을 통해 IP 주소, 포트 번호 얻을 수 있음. IP 주소의 경우 호스트 명으로 사용되기도 하고, 포트 번호의 경우 생략되기도 함(생략 시 80)
* URL에서 호스트명 추출 -> 호스트명 IP로 변환 -> 포트번호 추출 -> TCP 커넥션 -> 서버에 요청 & 응답받기 -> 커넥션 닫히면 문서 보여줌

### 텔넷(Telnet)을 이용한 실제 예제
* 텔넷 유틸리티는 키보드를 목적지의 TCP포트로, 출력 TCP포트를 화면으로 연결해줌
* 웹 서버와 직접 대화하는 용으로도 사용
* 클라이언트는 잘 흉내내도 서버로 적절하지 않음
* 보다 유연한 도구에 nc(netcat)이 있음
<br/><br/>

## 프로토콜 버전
* 오늘날 쓰이는 HTTP 버전 여러개

### HTTP/0.9
* 디자인 결함 다수, 구식 클라이언트하고만 사용 가능
* GET 메서만 지원
* 멀티미디어 컨텐츠에 대한 MIME 타입이나 HTTP 헤더, 버전 정보 지원 안함

### HTTP/1.0
* 처음으로 널리 쓰이기 시작한 버전
* 버전 정보, 헤더, 추가 메서드, 멀티미디어 객체 처리 추가됨

### HTTP/1.0+
* 월드 와이드 웹의 팽창과 상업적 성공으로 인해 몇가지 기능 추가됨
* 오래 지속되는 "keep-alive" 커넥션, 가상 호스팅 지원, 프락시 연결 지원 등

### HTTP/1.1
* 설계의 구조적 결함 해결, 성능 최적화, 잘못된 기능 제거에 집중한 버전

### HTTP/2.0
* 성능 문제 개선을 위해 SPDY 프로토콜을 기반으로 설계가 진행되고 있는 프로토콜 
<br/><br/>

## 웹의 구성요소
* `프락시`: 클라이언트와 서버 사이에 위치한 HTTP 중개자
* `캐시`: 많이 찾는 웹사이트를 클라이언트 가까이에 보관하는 HTTP 창고
* `게이트웨이`: 다른 애플리케이션과 연결된 특별한 웹서버
* `터널`: HTTP 통신을 전달하기만 하는 프라시
* `에이전트`: 자동화된 HTTP 요청을 만드는 준 지능적 웹 클라이언트

### 프락시
* 주로 보안을 위해 사용
* 요청과 응답 필터링 함

### 캐시
* 웹캐시와 캐시 프락시는 자신을 거쳐 가는 문서들 중 자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버
* 웹 서버에 저장된 문서를 가져오는 것보다 훨씬 빠르므로 HTTP 는 캐시가 효율적으로 동작하게 하고 캐시를 최신화하며 프라이버스를 보호하기 위해 많은 기능을 정의함

### 게이트 웨이
* 다른 서버들의 중개자로 동작하는 특별한 서버
* HTTP 트래픽을 다른 프로토콜로 변환하기 위해 주로 사용됨
* 클라이언트는 자신이 게이트웨이와 통신하고 있음을 알아채지 못함
* HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아들인 뒤, FTP 프로토콜을 이용해 문서를 가져옴

### 터널
* 두 커넥션 사이에서 raw 데이터를 열어보지 않고 그대로 전달해 주는 HTTP 애플리케이션
* 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송해주기 위해 사용

### 에이전트
* 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램
* 통제 없이 웹을 돌아니며 HTTP 트랜잭션을 일으키고 콘텐츠를 받아오는 자동화된 사용자 에이전트도 존재


<br/><br/>